<?xml version="1.0" encoding="utf-8"?>
<androidx.drawerlayout.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

    <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <com.google.android.material.appbar.AppBarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/topAppBar"
                android:layout_width="match_parent"
                android:layout_height="?attr/actionBarSize"
                android:background="@color/primary"
                app:title="Nutrition During Treatment"
                style="@style/Widget.Material3.Toolbar" />
        </com.google.android.material.appbar.AppBarLayout>

        <!-- Use NestedScrollView instead of ScrollView for better CoordinatorLayout integration -->
        <androidx.core.widget.NestedScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fillViewport="true"
            android:background="#FFFFFF"
            app:layout_behavior="@string/appbar_scrolling_view_behavior">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <!-- Header Section (unchanged) -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:gravity="center"
                    android:layout_marginBottom="24dp"
                    android:background="@drawable/rounded_header"
                    android:padding="20dp">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Nutrition During Treatment"
                        android:textSize="24sp"
                        android:textStyle="bold"
                        android:textColor="#2E7D32"
                        android:gravity="center"
                        android:layout_marginBottom="8dp"
                        android:fontFamily="sans-serif-medium" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="A Guide to Supporting Your Little Warrior"
                        android:textSize="16sp"
                        android:textColor="#555555"
                        android:gravity="center"
                        android:lineSpacingMultiplier="1.2" />
                </LinearLayout>

                <!-- Introduction Section (unchanged) -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:background="@drawable/rounded_card"
                    android:padding="20dp"
                    android:layout_marginBottom="16dp">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="When your child is fighting cancer, food becomes more than just a meal, it's a powerful tool to help them stay strong. Good nutrition is essential because it provides the energy and building blocks their body needs to heal, fight infections, and cope with the side effects of treatment."
                        android:textSize="15sp"
                        android:textColor="#333333"
                        android:lineSpacingMultiplier="1.4"
                        android:layout_marginBottom="12dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="By focusing on gentle, nourishing foods, you can help support your little warrior's immune system, maintain their strength, and make their journey a little bit easier. This guide is here to provide you with practical, simple, and comforting food ideas to help you through this time."
                        android:textSize="15sp"
                        android:textColor="#333333"
                        android:lineSpacingMultiplier="1.4" />
                </LinearLayout>

                <!-- Disclaimer Section (unchanged) -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:background="@drawable/rounded_warning"
                    android:padding="16dp"
                    android:layout_marginBottom="24dp">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Disclaimer"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="#D32F2F"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="This guide is for informational purposes only and does not replace advice from a healthcare professional. Always consult your doctor or dietitian for guidance specific to your child."
                        android:textSize="14sp"
                        android:textColor="#D32F2F"
                        android:lineSpacingMultiplier="1.3" />
                </LinearLayout>

                <!-- Quick & Healthy Snack Ideas Section -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="ðŸ¥ª Quick and Healthy Snack Ideas"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="#2E7D32"
                    android:layout_marginBottom="16dp" />

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Easy, gentle, and budget-friendly"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_marginBottom="20dp"
                    android:fontStyle="italic" />

                <!-- Symptom Tabs with WRAP_CONTENT height -->
                <com.google.android.material.tabs.TabLayout
                    android:id="@+id/tabLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:tabMode="scrollable" />

                <androidx.viewpager2.widget.ViewPager2
                    android:id="@+id/viewPager"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="400dp"
                    android:layout_marginBottom="24dp" />

                <!-- Do's & Don'ts Section (unchanged) -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Do's &amp; Don'ts"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="#2E7D32"
                    android:layout_marginBottom="16dp" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginBottom="24dp">

                    <!-- Do's Column -->
                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical"
                        android:background="@drawable/rounded_card_green"
                        android:padding="16dp"
                        android:layout_marginEnd="8dp">

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="âœ… Do's"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="#2E7D32"
                            android:layout_marginBottom="12dp" />

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="â€¢ Wash and cook all vegetables thoroughly\nâ€¢ Peel all fruits to reduce infection risk\nâ€¢ Offer small, frequent meals\nâ€¢ Use high-energy foods\nâ€¢ Keep your child well-hydrated\nâ€¢ Store and reheat leftovers properly\nâ€¢ Involve your child in choosing safe snacks"
                            android:textSize="13sp"
                            android:textColor="#333333"
                            android:lineSpacingMultiplier="1.3" />
                    </LinearLayout>

                    <!-- Don'ts Column -->
                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical"
                        android:background="@drawable/rounded_card_red"
                        android:padding="16dp"
                        android:layout_marginStart="8dp">

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="âŒ Don'ts"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="#D32F2F"
                            android:layout_marginBottom="12dp" />

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="â€¢ Don't give raw or undercooked foods\nâ€¢ Don't serve unpasteurized dairy\nâ€¢ Don't offer street foods or takeaways\nâ€¢ Don't give very spicy, acidic foods\nâ€¢ Don't leave food standing out\nâ€¢ Don't force your child to eat\nâ€¢ Don't use honey for children under 1"
                            android:textSize="13sp"
                            android:textColor="#333333"
                            android:lineSpacingMultiplier="1.3" />
                    </LinearLayout>
                </LinearLayout>

                <!-- Meal Ideas Section -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="ðŸ½ï¸ Meal Ideas"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="#2E7D32"
                    android:layout_marginBottom="16dp" />

                <com.google.android.material.tabs.TabLayout
                    android:id="@+id/mealTabLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:tabMode="scrollable" />

                <androidx.viewpager2.widget.ViewPager2
                    android:id="@+id/mealViewPager"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="450dp"
                    android:layout_marginBottom="24dp" />

            </LinearLayout>
        </androidx.core.widget.NestedScrollView>

        <!-- Floating Action Button -->
        <LinearLayout
            android:id="@+id/fabContainer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:orientation="horizontal"
            android:gravity="right"
            android:padding="12dp"
            android:elevation="6dp">

            <com.google.android.material.floatingactionbutton.FloatingActionButton
                android:id="@+id/fabChat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="8dp"
                android:contentDescription="Go to Dashboard"
                app:srcCompat="@drawable/bot_face"
                android:backgroundTint="#87CEFA"
                app:tint="@android:color/white" />
        </LinearLayout>
    </androidx.coordinatorlayout.widget.CoordinatorLayout>

    <!-- Navigation Drawer -->
    <com.google.android.material.navigation.NavigationView
        android:id="@+id/nav_view"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:fitsSystemWindows="true"
        app:headerLayout="@layout/nav_header"
        app:menu="@menu/navigation_menu" />

</androidx.drawerlayout.widget.DrawerLayout>